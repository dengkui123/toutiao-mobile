(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78fc056f"],{"2b6e":function(t,e,a){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),n=a("5899"),s="["+n+"]",i=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),o=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(c,"")),a}};t.exports={start:o(1),end:o(2),trim:o(3)}},"661a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-container"},[a("van-nav-bar",{staticClass:"page-nav-bar",attrs:{title:t.userInfo.name}},[a("van-icon",{attrs:{slot:"left",name:"arrow-left"},on:{click:function(e){return t.$router.back()}},slot:"left"})],1),a("div",{staticClass:"user-info-container"},[a("div",{staticClass:"row1"},[a("van-image",{staticClass:"col1",attrs:{fit:"cover",round:"",src:t.userInfo.photo}}),a("div",{staticClass:"col2"},[a("div",{staticClass:"row1"},[a("div",{staticClass:"item"},[a("div",{staticClass:"count"},[t._v(t._s(t.userInfo.art_count))]),a("div",{staticClass:"text"},[t._v("发布")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"count"},[t._v(t._s(t.userInfo.follow_count))]),a("div",{staticClass:"text"},[t._v("关注")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"count"},[t._v(t._s(t.userInfo.fans_count))]),a("div",{staticClass:"text"},[t._v("粉丝")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"count"},[t._v(t._s(t.userInfo.like_count))]),a("div",{staticClass:"text"},[t._v("获赞")])])]),a("div",{staticClass:"action"},[t.userInfo.is_followed?a("van-button",{staticClass:"follow-btn",attrs:{round:"",size:"small",loading:t.loading},on:{click:t.onFollow}},[t._v("已关注")]):a("van-button",{staticClass:"follow-btn",attrs:{type:"info",color:"#3296fa",round:"",size:"small",loading:t.loading},on:{click:t.onFollow}},[t._v("关注")])],1)])],1),a("van-divider"),a("div",{staticClass:"intro-wrap"},[t.userInfo.is_media?a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v("认证：")]),a("span",{staticClass:"text"},[t._v("用户的认证信息")])]):t._e(),a("div",{staticClass:"item"},[a("span",{staticClass:"title"},[t._v("简介：")]),a("span",{staticClass:"text"},[t._v(t._s(t.userInfo.intro))])])]),a("van-divider")],1),t._l(t.list,(function(e,r){return a("div",{key:r,staticClass:"article-list"},[a("div",{staticClass:"msg"},[a("van-image",{staticClass:"col1",attrs:{fit:"cover",round:"",width:"40",height:"40",src:t.userInfo.photo}}),a("div",{staticClass:"row"},[a("span",{staticClass:"row1"},[t._v(t._s(t.userInfo.name))]),a("span",{staticClass:"row2"},[t._v(t._s(t._f("localFormat")(e.pubdate)))])])],1),a("article-item",{attrs:{article:e,"user-info":t.userInfo}}),a("van-divider")],1)}))],2)},n=[],s=a("1da1"),i=(a("96cf"),a("a9e3"),a("c24f")),c=a("6ea2"),o={name:"UserPage",components:{ArticleItem:c["a"]},props:{userId:{type:[Number,String],required:!0}},data:function(){return{userInfo:{},list:[],loading:!1}},computed:{},watch:{},methods:{loadUserInfo:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i["g"])(t.userId);case 3:a=e.sent,r=a.data,t.userInfo=r.data,console.log(r),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.$toast.fail("加载失败");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},loadUserArticle:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i["c"])(t.userId);case 3:a=e.sent,r=a.data,console.log(r),t.list=r.data.results,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("加载失败");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},onFollow:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,e.prev=1,!t.userInfo.is_followed){e.next=7;break}return e.next=5,Object(i["b"])(t.userId);case 5:e.next=9;break;case 7:return e.next=9,Object(i["a"])(t.userId);case 9:e.next=16;break;case 11:e.prev=11,e.t0=e["catch"](1),a="操作失败，请重试！",e.t0.response&&400===e.t0.response.status&&(a="你不能关注你自己"),t.$toast(a);case 16:t.loading=!1;case 17:case"end":return e.stop()}}),e,null,[[1,11]])})))()}},created:function(){this.loadUserInfo(),this.loadUserArticle()},mounted:function(){}},u=o,l=(a("6a31"),a("2877")),f=Object(l["a"])(u,r,n,!1,null,"1e6af07a",null);e["default"]=f.exports},"6a31":function(t,e,a){"use strict";a("a2a4")},"6ea2":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-cell",{staticClass:"article-item",attrs:{to:"/article/"+t.article.art_id}},[a("div",{staticClass:"title van-multi-ellipsis--l2",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.article.title))]),a("div",{attrs:{slot:"label"},slot:"label"},[3===t.article.cover.type?a("div",{staticClass:"cover-wrap"},t._l(t.article.cover.images,(function(t,e){return a("div",{key:e,staticClass:"cover-item"},[a("van-image",{attrs:{slot:"default",fit:"cover",src:t},slot:"default"})],1)})),0):t._e(),t.userInfo?t._e():a("div",{staticClass:"label-info-wrap"},[a("span",[t._v(t._s(t.article.aut_name))]),a("span",[t._v(t._s(t.article.comm_count)+"评论")]),a("span",[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])]),1===t.article.cover.type?a("van-image",{attrs:{slot:"default",fit:"cover",src:t.article.cover.images[0]},slot:"default"}):t._e()],1)},n=[],s={name:"ArticleItem",components:{},props:{article:{type:Object,required:!0},userInfo:{type:Object}},data:function(){return{}},watch:{},computed:{},methods:{},created:function(){},mounted:function(){}},i=s,c=(a("d3dc"),a("2877")),o=Object(c["a"])(i,r,n,!1,null,"0b1315a3",null);e["a"]=o.exports},7156:function(t,e,a){var r=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var s,i;return n&&"function"==typeof(s=e.constructor)&&s!==a&&r(i=s.prototype)&&i!==a.prototype&&n(t,i),t}},a2a4:function(t,e,a){},a9e3:function(t,e,a){"use strict";var r=a("83ab"),n=a("da84"),s=a("94ca"),i=a("6eeb"),c=a("5135"),o=a("c6b6"),u=a("7156"),l=a("c04e"),f=a("d039"),d=a("7c73"),v=a("241c").f,p=a("06cf").f,_=a("9bf2").f,m=a("58a8").trim,b="Number",h=n[b],C=h.prototype,g=o(d(C))==b,I=function(t){var e,a,r,n,s,i,c,o,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+u}for(s=u.slice(2),i=s.length,c=0;c<i;c++)if(o=s.charCodeAt(c),o<48||o>n)return NaN;return parseInt(s,r)}return+u};if(s(b,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var w,O=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof O&&(g?f((function(){C.valueOf.call(a)})):o(a)!=b)?u(new h(I(e)),a,O):I(e)},x=r?v(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),E=0;x.length>E;E++)c(h,w=x[E])&&!c(O,w)&&_(O,w,p(h,w));O.prototype=C,C.constructor=O,i(n,b,O)}},c24f:function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"i",(function(){return s})),a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return u})),a.d(e,"g",(function(){return l})),a.d(e,"c",(function(){return f})),a.d(e,"f",(function(){return d})),a.d(e,"k",(function(){return v})),a.d(e,"j",(function(){return p}));var r=a("b775"),n=function(t){return Object(r["a"])({method:"POST",url:"./app/v1_0/authorizations",data:t})},s=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},i=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})},c=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/channels"})},o=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},u=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})},l=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/users/".concat(t)})},f=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/users/".concat(t,"/articles")})},d=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})},v=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})},p=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})}},d3dc:function(t,e,a){"use strict";a("2b6e")}}]);
//# sourceMappingURL=chunk-78fc056f.1c4df542.js.map